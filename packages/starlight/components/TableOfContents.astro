---
import { getTocFromEntry } from '../src/lib/getTocFromEntry';
import TableOfContentsList from './TableOfContents/TableOfContentsList.astro';

const entry = Astro.locals.starlightRoute.entry;
const toc = await getTocFromEntry(entry);
---

{
	toc && (
		<starlight-toc data-min-h={toc.minHeadingLevel} data-max-h={toc.maxHeadingLevel}>
			<nav aria-labelledby="starlight__on-this-page">
				<h2 id="starlight__on-this-page">{Astro.locals.t('tableOfContents.onThisPage')}</h2>
				<TableOfContentsList toc={toc} />
			</nav>
		</starlight-toc>
	)
}

<script src="./TableOfContents/starlight-toc"></script>
